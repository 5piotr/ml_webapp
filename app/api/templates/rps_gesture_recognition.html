{% extends "base.html" %}

{% block title %}
<title>Simple Gesture Recognition</title>
<meta name="title" property="og:title" content="Simple Gesture Recognition">
<meta name="image" property="og:image" content="/static/images/rps/rock-paper-scissors_2.png">
<meta name="description" property="og:description" content="This application is using convolutional neural network model
to classify images of the Rock Paper Scissors game calls.">
{% endblock %}

{% block body_block %}

<div class="container">
  <div class="row">
    <div class="col-md-6" style='margin: 3rem auto;'>
      <h4>Rock Paper Scissors gesture recognition</h4>
      <br>
      <form id="form" method="post" enctype="multipart/form-data">
        <div class="form-group">
          <div class="custom-file">
            <label for="formFile" class="form-label">Please upload a picture of the rock paper scissors game gesture:</label>
            <input class="form-control" type="file" id="formFile" name='picture' accept=".jpg,.png" required>
          </div>
          <small class="form-text text-muted">
            <p>Picture should be taken on a contrasting uniform surface under diffused lighting conditions.<br>
              Max file size: 4MB<br>
              Format: JPEG, PNG<br>
            </p>
          </small>

        </div>
        <button type="submit" class="btn btn-success">Upload</button>
        <div id='spinner'></div>

      </form>

      <br>

      {% if plot_div_r %}
          <div class="alert alert-success alert-dismissible fade show" role="alert" style='padding: 1rem;'>
            <br>
            <div class="container text-center">
              {% autoescape off %}
              {{ plot_div_r }}
              {{ plot_div_k }}
              {{ plot_div_e }}
              {% endautoescape %}
              <br>
              The picture you uploaded is showing a
              <strong>{{ label }}</strong> gesture<br><br>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <div class="text-center">
              <a href="/rps_gesture_recognition/details" class="btn btn-info btn-sm" role="button" style='margin: 1rem 0;'>
                More details about the CNN model
              </a>
            </div>
          </div>

      {% elif error_message %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>{{ error_message }}</strong>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endif %}



    </div>

  </div>

</div>


{% endblock %}

{% block script_block %}
<script src="/static/js/rps_gesture_recognition.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock %}
